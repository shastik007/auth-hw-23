(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{13:function(e,t,n){e.exports={auth:"AuthForm_auth__3yDSt",control:"AuthForm_control__2mtVa",actions:"AuthForm_actions__3O5Cf",toggle:"AuthForm_toggle__38-kl"}},17:function(e,t,n){e.exports={form:"ProfileForm_form__iXuq6",control:"ProfileForm_control__18OZL",action:"ProfileForm_action__d6f2h"}},21:function(e,t,n){e.exports={header:"MainNavigation_header__3uLmA",logo:"MainNavigation_logo__6q957",active:"MainNavigation_active__1ZRKA"}},25:function(e,t,n){e.exports={profile:"UserProfile_profile__3kfsK"}},26:function(e,t,n){e.exports={starting:"StartingPageContent_starting__3yZYj"}},32:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r,c=n(16),s=n.n(c),a=(n(32),n(9)),o=n(0),i=n.n(o),u=n(8),l=n(10),j=n(20),b=n(15),h=n.n(b),d=n(12),O="AIzaSyC9tRH7snIC_5CkHW70ICA07ffWosyMY8U",f=Object(d.b)("auth/signUp",function(){var e=Object(j.a)(h.a.mark((function e(t,n){var r,c,s,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,fetch("".concat("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=").concat(O),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return c=e.sent,e.next=7,c.json();case 7:if(s=e.sent,c.ok){e.next=12;break}throw a="Authentciation failed",s&&s.error&&s.error.message&&(a=s.error.message),new Error(a);case 12:return e.abrupt("return",s);case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,n){return e.apply(this,arguments)}}()),x=Object(d.b)("auth/signIn",function(){var e=Object(j.a)(h.a.mark((function e(t,n){var r,c,s,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,fetch("".concat("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=").concat(O),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return c=e.sent,e.next=7,c.json();case 7:if(s=e.sent,c.ok){e.next=12;break}throw a="Authentciation failed",s&&s.error&&s.error.message&&(a=s.error.message),new Error(a);case 12:return e.abrupt("return",s);case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,n){return e.apply(this,arguments)}}()),p={isAuth:JSON.parse(localStorage.getItem("authen"))||!1,token:null,status:null,error:null},m=function(e,t){e.status="rejected",e.error=t.payload},g=Object(d.c)({name:"auth",initialState:p,reducers:{logout:function(e){e.isAuth=!1}},extraReducers:(r={},Object(l.a)(r,f.pending,(function(e){e.status="loading"})),Object(l.a)(r,f.fulfilled,(function(e,t){e.status="succes",e.user=t.payload,e.isAuth=!0})),Object(l.a)(r,f.rejected,m),Object(l.a)(r,x.pending,(function(e){e.status="loading"})),Object(l.a)(r,x.fulfilled,(function(e,t){e.status="succes",e.user=t.payload,e.isAuth=!0})),Object(l.a)(r,x.rejected,m),r)}),_=g.actions,v=g,y=n(21),w=n.n(y),N=n(1),A=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.auth})).isAuth;return Object(o.useEffect)((function(){localStorage.setItem("authen",JSON.stringify(t))}),[t]),Object(N.jsxs)("header",{className:w.a.header,children:[Object(N.jsx)(a.b,{to:"/",children:Object(N.jsx)("div",{className:w.a.logo,children:"React Auth"})}),Object(N.jsx)("nav",{children:Object(N.jsxs)("ul",{children:[Object(N.jsx)("li",{children:Object(N.jsx)(a.b,{to:"/home",activeStyle:{color:"#c291e2"},children:"Home"})}),!t&&Object(N.jsx)("li",{children:Object(N.jsx)(a.b,{to:"/auth",activeStyle:{color:"#c291e2"},children:"Login"})}),t&&Object(N.jsx)("li",{children:Object(N.jsx)(a.b,{to:"/profile",activeStyle:{color:"#c291e2"},children:"Profile"})}),t&&Object(N.jsx)("li",{children:Object(N.jsx)("button",{onClick:function(){return e(_.logout())},children:"Logout"})})]})})]})},k=function(e){return Object(N.jsxs)(o.Fragment,{children:[Object(N.jsx)(A,{}),Object(N.jsx)("main",{children:e.children})]})},S=n(17),P=n.n(S),C=function(){Object(u.c)((function(e){return e.auth})),Object(o.useRef)();return Object(N.jsxs)("form",{className:P.a.form,children:[Object(N.jsxs)("div",{className:P.a.control,children:[Object(N.jsx)("label",{htmlFor:"new-password",children:"New Password"}),Object(N.jsx)("input",{type:"password",id:"new-password"})]}),Object(N.jsx)("div",{className:P.a.action,children:Object(N.jsx)("button",{children:"Change Password"})})]})},F=n(25),I=n.n(F),L=function(){return Object(N.jsxs)("section",{className:I.a.profile,children:[Object(N.jsx)("h1",{children:"Your User Profile"}),Object(N.jsx)(C,{})]})},R=n(27),E=n(3),J=n(13),U=n.n(J),W=function(){var e=Object(E.g)(),t=Object(u.c)((function(e){return e.auth})),n=t.isAuth,r=t.status,c=t.error,s=Object(o.useState)(!0),a=Object(R.a)(s,2),i=a[0],l=a[1],j=Object(u.b)(),b=Object(o.useRef)(),h=Object(o.useRef)();return Object(o.useEffect)((function(){n&&e.push("/profile")}),[n]),Object(N.jsxs)("section",{className:U.a.auth,children:[Object(N.jsx)("h1",{children:i?"Login":"Sign Up"}),Object(N.jsx)("strong",{children:c}),Object(N.jsx)("br",{}),c&&Object(N.jsx)("br",{}),Object(N.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=b.current.value,n=h.current.value;j(i?x({email:t,password:n}):f({email:t,password:n}))},children:[Object(N.jsxs)("div",{className:U.a.control,children:[Object(N.jsx)("label",{htmlFor:"email",children:"Your Email"}),Object(N.jsx)("input",{ref:b,type:"email",id:"email",required:!0})]}),Object(N.jsxs)("div",{className:U.a.control,children:[Object(N.jsx)("label",{htmlFor:"password",children:"Your Password"}),Object(N.jsx)("input",{ref:h,type:"password",id:"password",required:!0})]}),Object(N.jsxs)("div",{className:U.a.actions,children:["loading"!==r&&Object(N.jsx)("button",{children:i?"Login":"Create Account"}),"loading"===r&&Object(N.jsx)("p",{children:"Pending request..."}),Object(N.jsx)("button",{type:"button",className:U.a.toggle,onClick:function(){l((function(e){return!e}))},children:i?"Create new account":"Login with existing account"})]})]})]})},q=function(){return Object(N.jsx)(W,{})},Y=n(26),M=n.n(Y),T=function(){return Object(N.jsx)("section",{className:M.a.starting,children:Object(N.jsx)("h1",{children:"Welcome on Board!"})})},H=function(){return Object(N.jsx)(T,{})},V=function(e){var t=e.children;return Object(u.c)((function(e){return e.auth})).isAuth?Object(N.jsx)(i.a.Fragment,{children:t}):Object(N.jsx)(E.a,{to:"/auth"})},Z=function(){return Object(N.jsxs)(E.d,{children:[Object(N.jsx)(E.b,{path:"/",exact:!0,children:Object(N.jsx)(E.a,{to:"/home"})}),Object(N.jsx)(E.b,{path:"/home",exact:!0,children:Object(N.jsx)(H,{})}),Object(N.jsx)(E.b,{path:"/auth",children:Object(N.jsx)(q,{})}),Object(N.jsx)(E.b,{path:"/profile",children:Object(N.jsx)(V,{children:Object(N.jsx)(L,{})})})]})};var B=function(){return Object(N.jsx)(a.a,{children:Object(N.jsx)(k,{children:Object(N.jsx)(Z,{})})})},D=Object(d.a)({reducer:{auth:v.reducer}});s.a.render(Object(N.jsx)(u.a,{store:D,children:Object(N.jsx)(B,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.09a60faf.chunk.js.map